<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>GRID</title>
    <style>
        body {
            background: #2e2d35;
        }
        svg {
            width: 100vw;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
        }

        #letters>text {
            fill: black;
            font-family: monospace;
            letter-spacing: var(--spacing-x);

        }
        #letters>rect {
            fill: white;
        }
    </style>
</head>

<body>
    <svg>
        <defs>
            <mask id="letters"></mask>
            <radialGradient id="flashlightGradient" cx="0.5" cy="0.5" r="0.5">
                <stop offset="0%" stop-color="rgba(255, 239, 202, 1)" />
                <stop offset="10%" stop-color="rgba(255, 239, 202, 1)" />
                <stop offset="25%" stop-color="rgba(249, 220, 144, 0.4)" />
                <stop offset="100%" stop-color="transparent" />
            </radialGradient>
        </defs>
        <rect class="flashlight" width="1200px" height="1200px" fill="url(#flashlightGradient)" opacity="0.5"></rect>
        <rect width="100%" height="100%" fill="#171a2b" mask="url(#letters)" />
        <rect class="flashlight" width="1200px" height="1200px" fill="url(#flashlightGradient)" opacity="0.02"></rect>
    </svg>


    <script>
        const letterSize = 30;
        const xScale = 1.816;
        const yScale = 1.34;
        function initialize() {
            window.addEventListener('resize', fillGrid);
            window.addEventListener('mousemove', (e)=>{
                let flashlights = document.getElementsByClassName('flashlight');
                for(let f of flashlights) {
                    f.setAttribute('x', e.clientX - 600);
                    f.setAttribute('y', e.clientY - 600);
                }
            });
            fillGrid();
        }
        initialize();
        
        function fillGrid() {
            let mx = Math.floor(window.innerWidth/(letterSize/xScale));
            let my = Math.floor(window.innerHeight/(letterSize/yScale));
            let randomAsciiCharacter = () => String.fromCharCode(Math.floor(Math.random() * 26) + 65);

            let html = '<rect width="100%" height="100%" />'
            for (var y = 0; y < my; y++) {
                let text = '';
                for (var x = 0; x < mx; x++) text += randomCharacter();
                html += `<text dy="${letterSize / 1.43}px" style="transform: translate(var(--spacing-x), calc((${letterSize/yScale}px + 100vh) * ${((y + 1) / (my + 1)).toFixed(3)} - ${letterSize/yScale}px))">${text}</text>`
            }

            let container = document.getElementById('letters')
            container.innerHTML = html;
            container.style.setProperty('font-size', `${letterSize}px`);
            container.style.setProperty('--spacing-x', `calc((100vw - ${mx * letterSize}px / ${xScale})/${mx + 1})`);
        }
        function randomCharacter() {
            let alphabet = 'ABCDEFGHIJKLMNOPRSTUVWXYZ#%:+1234567890';
            return alphabet[Math.floor(Math.random() * alphabet.length)];
        }
    </script>
</body>

</html>